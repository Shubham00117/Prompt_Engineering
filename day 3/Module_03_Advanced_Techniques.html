<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 03: Advanced Prompting Techniques</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: linear-gradient(135deg, #2b1055 0%, #7597de 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #fff;
            margin-bottom: 40px;
            font-size: 2.5em;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .section h2 {
            color: white;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            padding: 20px;
            border-radius: 10px;
            margin: -40px -40px 30px -40px;
            text-align: center;
            font-size: 1.8em;
        }

        .section h3 {
            color: #6a11cb;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.4em;
            border-bottom: 3px solid #6a11cb;
            padding-bottom: 10px;
        }

        .why-matters {
            background: linear-gradient(135deg, #6a11cb15, #2575fc15);
            border-left: 5px solid #6a11cb;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-size: 1.1em;
            line-height: 1.8;
        }

        .explanation {
            background: #f3e5f5;
            border-left: 5px solid #9c27b0;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-size: 1.1em;
            line-height: 1.8;
        }

        .example-box {
            background: #fdfbff;
            border: 3px solid #6a11cb;
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }

        .key-concept {
            background: #e1f5fe;
            border-left: 5px solid #03a9f4;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-size: 1.1em;
            line-height: 1.8;
        }

        .summary-box {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            font-size: 1.2em;
            text-align: center;
            font-weight: bold;
        }

        .diagram {
            background: white;
            border: 2px solid #6a11cb;
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
            font-family: monospace;
            font-size: 1.1em;
            line-height: 1.4;
            overflow-x: auto;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .table th {
            background: #6a11cb;
            color: white;
            padding: 15px;
            text-align: left;
        }

        .table td {
            padding: 12px 15px;
            border-bottom: 2px solid #ddd;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .visual-item {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #6a11cb;
            text-align: center;
        }

        .warning-box {
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
            border: 3px solid #f44336;
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }

        .toc {
            background: #f3e5f5;
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }

        .toc ul {
            columns: 2;
            list-style: none;
            padding-left: 0;
        }

        .toc li {
            padding: 8px 0;
            border-bottom: 1px dashed #ddd;
        }

        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }

            .toc ul {
                columns: 1;
            }
        }

        .pipeline {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            justify-content: center;
            margin: 30px 0;
            padding: 30px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 15px;
            border: 2px solid #667eea;
        }

        .pipe-step {
            padding: 12px 18px;
            border-radius: 10px;
            font-weight: bold;
            color: white;
            font-size: 0.9em;
            text-align: center;
            min-width: 130px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .pipe-step:hover {
            transform: translateY(-5px);
        }

        .pipe-step.blue {
            background: linear-gradient(135deg, #2196f3, #00bcd4);
        }

        .pipe-step.green {
            background: linear-gradient(135deg, #4caf50, #8bc34a);
        }

        .pipe-step.purple {
            background: linear-gradient(135deg, #9c27b0, #e91e63);
        }

        .pipe-step.indigo {
            background: linear-gradient(135deg, #3f51b5, #673ab7);
        }

        .pipe-arrow {
            color: #667eea;
            font-weight: bold;
            font-size: 1.5em;
        }

        @media (max-width: 768px) {
            .pipeline {
                flex-direction: column;
            }

            .pipe-arrow {
                transform: rotate(90deg);
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üöÄ Module 03: Advanced Prompting Architectures</h1>

        <!-- Table of Contents -->
        <div class="section">
            <h2>üìã Modern AI Architectures</h2>
            <div class="toc">
                <ul>
                    <li>1. Prompt Chaining & Decomposition</li>
                    <li>2. Advanced Reasoning Patterns</li>
                    <li>3. RAG Fundamentals</li>
                    <li>4. Deep RAG Strategies</li>
                    <li>5. Defensive Design & Safety</li>
                    <li>6. Edge Case Handling</li>
                </ul>
            </div>
        </div>

        <!-- Topic 1: Prompt Chaining -->
        <div class="section" id="topic-1">
            <h2>1Ô∏è‚É£ Prompt Chaining & Decomposition</h2>
            <div class="explanation">
                <strong>Core Idea:</strong> Transitioning from <strong>Monolithic Instruction</strong> to
                <strong>Modular Pipelines</strong>. By decomposing complex tasks into atomic, verifiable chains, we
                minimize context drift and maximize deterministic reliability.
            </div>

            <div class="grid-2">
                <div class="visual-item" style="border-color: #9c27b0;">
                    <strong>‚õìÔ∏è Prompt Chaining</strong><br>
                    The sequential linking of LLM prompts where the output of one stage is passed as the starting point
                    (context) for the next stage.
                </div>
                <div class="visual-item" style="border-color: #9c27b0;">
                    <strong>üß© Decomposition</strong><br>
                    The logical breakdown of a single complex request into multiple simpler, "atomic" sub-tasks that are
                    easier for the model to handle without losing focus.
                </div>
            </div>
            <div class="diagram">
                <pre style="color: #2b1055;">
üõë <strong>MONOLITHIC (Single-Turn Risk)</strong>
[ Complex Prompt ] ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ñ∂ [ Single Massive Generation ]
                                     (‚ö†Ô∏è High Hallucination Risk)

‚úÖ <strong>CHAINED (Atomic Reliability)</strong>
[ P1: Extract ] ‚îÄ‚îÄ‚ñ∂ [ P2: Analyze ] ‚îÄ‚îÄ‚ñ∂ [ P3: Format ]
      ‚îÇ                 ‚îÇ                 ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ VERIFY ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ AUDIT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÄ‚îÄ‚ñ∂ üöÄ Reliable Output
                </pre>
            </div>
            <div class="grid-2">
                <div class="visual-item">
                    <strong>‚úÖ Benefits</strong><br>
                    Steps are verifiable.<br>
                    Easier to debug.<br>
                    Retriable sub-tasks.
                </div>
                <div class="visual-item">
                    <strong>‚ùå Chaining Cost</strong><br>
                    Slower latency.<br>
                    Higher token overhead.<br>
                    State management needed.
                </div>
            </div>
            <div class="key-concept">
                <strong>üí° Chain of Verification (CoVe)</strong><br>
                1. AI gives initial answer.<br>
                2. AI creates self-verification questions ("Did I hallucinate the date?").<br>
                3. AI answers those questions independently.<br>
                4. AI revises initial answer based on facts.
            </div>
        </div>

        <!-- Topic 2: Advanced Reasoning -->
        <div class="section" id="topic-2">
            <h2>2Ô∏è‚É£ Advanced Reasoning Patterns</h2>
            <div class="explanation">
                <strong>Core Idea:</strong> Transition from <strong>Intuitive Prediction</strong> to <strong>Structured
                    Logic</strong> to eliminate "Fast Thinking" errors in high-stakes tasks.
            </div>

            <div class="grid-2">
                <div class="visual-item" style="border-bottom: 4px solid #ff9800;">
                    <strong>‚ùå Fast Thinking</strong><br>
                    Pattern-based guessing. High inaccuracy in math/logic.
                </div>
                <div class="visual-item" style="border-bottom: 4px solid #4caf50;">
                    <strong>‚úÖ Slow Thinking</strong><br>
                    Systematic derivation. High reliability via grounding.
                </div>
            </div>

            <table class="table">
                <tr style="background: #6a11cb; color: white;">
                    <th>Pattern</th>
                    <th>How it Works</th>
                    <th>Use Case</th>
                </tr>
                <tr>
                    <td><strong>Least-to-Most</strong></td>
                    <td>Solve sub-problems in order of difficulty.</td>
                    <td>Complex logic.</td>
                </tr>
                <tr>
                    <td><strong>PoT</strong></td>
                    <td>Write Python code to solve math problems.</td>
                    <td>Precise math.</td>
                </tr>
                <tr>
                    <td><strong>MAD (Debate)</strong></td>
                    <td>Pro vs. Con agents critique each other.</td>
                    <td>Critical analysis.</td>
                </tr>
            </table>

            <div class="diagram" style="padding: 15px; background: #fdfbff; border: 1px solid #6a11cb;">
                <pre style="color: #6a11cb; font-size: 0.9em; margin: 0; white-space: pre-wrap;">
üîÑ <strong>DEBATE FLOW:</strong> [üë§ USER] ‚Üí [ü§ñ PROPOSER] ‚¨å [üõ°Ô∏è CONTRARIAN] ‚Üí [‚öñÔ∏è FINAL JUDGE]
                </pre>
            </div>

            <div
                style="margin-top: 15px; font-size: 0.95em; line-height: 1.6; border-left: 3px solid #6a11cb; padding-left: 15px; margin-bottom: 20px;">
                <p>üë§ <strong>USER:</strong> Provides the initial complex request or problem statement.</p>
                <p>ü§ñ <strong>PROPOSER:</strong> Generates the first comprehensive solution with supporting facts.</p>
                <p>üõ°Ô∏è <strong>CONTRARIAN:</strong> Critical agent that identifies errors, biases, and logical flaws.
                </p>
                <p>‚öñÔ∏è <strong>FINAL JUDGE:</strong> Reviews the debate to deliver the most accurate and balanced final
                    result.</p>
            </div>

            <div class="example-box" style="border-color: #f44336; background: #fffde7; padding: 20px;">
                <h4 style="color: #d32f2f; margin-bottom: 10px;">üö® Reasoning MUST-DOs</h4>
                <ul style="list-style: none; padding: 0;">
                    <li>üîπ <strong>Thought Masking:</strong> AI thinks privately first and shows only the clean final
                        answer.</li>
                    <li>üîπ <strong>Enforce Steps:</strong> AI solves problems in a fixed order‚ÄîVariables ‚Üí Formula ‚Üí
                        Result.</li>
                    <li>üîπ <strong>Trigger Review:</strong> AI checks and corrects its answer before giving the final
                        output.</li>
                    <li>üîπ <strong>Ground Claims:</strong> Every step must come directly from the given input data, not
                        guesses.</li>
                </ul>
            </div>


        </div>

        <!-- Topic 3: Retrieval-Augmented Generation (RAG) -->
        <div class="section" id="topic-3">
            <h2>3Ô∏è‚É£ Retrieval-Augmented Generation (RAG)</h2>
            <div class="explanation">
                <strong>Core Idea:</strong> Separating <strong>Knowledge from Reasoning</strong>. RAG changes the LLM's
                role from a "Knowledge Storage" (often outdated) to a "Reasoning Engine" that works on fresh, external
                data.
            </div>

            <div class="grid-2">
                <div class="visual-item" style="background: #e3f2fd; border-bottom: 4px solid #2196f3;">
                    <strong>üß† Reasoning Engine (LLM)</strong><br>
                    Does the logical processing and writing.
                </div>
                <div class="visual-item" style="background: #e8f5e9; border-bottom: 4px solid #4caf50;">
                    <strong>üìÑ Knowledge Base (Source Data)</strong><br>
                    Provides the latest, real-world facts.
                </div>
            </div>

            <div class="example-box">
                <h4>üõ†Ô∏è Basic RAG Pattern (How it Works)</h4>
                <ol style="padding-left: 20px; line-height: 1.8;">
                    <li><strong>Question:</strong> User asks a question.</li>
                    <li><strong>Retrieval:</strong> System searches a database for relevant document pieces.</li>
                    <li><strong>Context Inject:</strong> Top pieces are inserted into a <code>&lt;context&gt;</code>
                        block.</li>
                    <li><strong>Instruction:</strong> LLM is told: <em>"Answer using ONLY this context."</em></li>
                    <li><strong>Generation:</strong> LLM reads facts and writes the final answer.</li>
                </ol>
            </div>

            <div class="grid-2">
                <div class="visual-item">
                    <strong>ÔøΩ Without RAG</strong><br>
                    LLM relies on memory. Risk of outdated data and hallucinations.
                </div>
                <div class="visual-item">
                    <strong>‚úÖ With RAG</strong><br>
                    LLM relies on fetched context. Facts are always up-to-date and grounded.
                </div>
            </div>

            <div class="key-concept" style="border-left-color: #ff9800; background: #fff3e0;">
                <strong>‚öôÔ∏è The Mechanism: Chunking & Embeddings</strong>
                <p style="margin-top: 10px;">
                    üîπ <strong>Chunking:</strong> Breaking large docs into small "atomic" pieces (e.g., 500 characters)
                    so they fit inside the AI's limited focus window.
                </p>
                <p>
                    üîπ <strong>Embeddings:</strong> Converting text into <strong>Vectors</strong> (number lists). This
                    allows "Semantic Search"‚Äîfinding things by <em>meaning</em> (e.g., matching "leave policy" with
                    "vacation rules").
                </p>
            </div>

            <div class="pipeline">
                <div class="pipe-step blue">üìÑ Documents</div>
                <div class="pipe-arrow">‚ûî</div>
                <div class="pipe-step blue">üß© Chunking</div>
                <div class="pipe-arrow">‚ûî</div>
                <div class="pipe-step blue">üî¢ Embeddings</div>
                <div class="pipe-arrow">‚ûî</div>
                <div class="pipe-step green">üóÑÔ∏è Vector Storage</div>
                <div class="pipe-arrow">‚ûî</div>
                <div class="pipe-step purple">üîç Semantic Search</div>
                <div class="pipe-arrow">‚ûî</div>
                <div class="pipe-step purple">üì• Retrieved Context</div>
                <div class="pipe-arrow">‚ûî</div>
                <div class="pipe-step indigo">üß† LLM Reasoning</div>
                <div class="pipe-arrow">‚ûî</div>
                <div class="pipe-step indigo">üöÄ Final Answer</div>
            </div>

            <div style="text-align: center; margin: 30px 0;">
                <img src="rag_architecture_diagram.png" alt="RAG Architecture Diagram"
                    style="max-width: 100%; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); border: 4px solid #667eea;">
                <p style="color: #667eea; font-weight: bold; margin-top: 15px; font-size: 1.1em;">üé® Visual: The
                    High-Tech RAG Lifecycle Architecture</p>
            </div>

            <div class="summary-box">
                üîÑ <strong>RAG Mission:</strong> Accurate AI through fresh knowledge + reasoning focus.
            </div>
            <div class="key-concept" style="text-align: center; border: 2px solid #667eea;">
                üìå <strong>Final One-Line Understanding:</strong> RAG makes AI accurate by giving it fresh external
                knowledge and letting it only focus on <strong>reasoning</strong> instead of
                <strong>memorization</strong>.
            </div>
        </div>

        <!-- Topic 4: Deep RAG -->
        <div class="section" id="topic-4">
            <h2>4Ô∏è‚É£ Deep RAG Strategies</h2>
            <div class="explanation">
                <strong>Core Idea:</strong> Moving from <strong>Keyword Hits</strong> to <strong>Intent
                    Retrieval</strong>. Advanced RAG uses Query Rewriting and Hybrid Search to bridge the gap between
                user ambiguity and document precision.
            </div>
            <div class="grid-2">
                <div class="visual-item">
                    <strong>üîÑ Query Rewriting</strong>
                    <br>
                    User asks: "How much?" (Vague).
                    <br>
                    LLM rewrites to: "What is the pricing of the Pro plan?" (Searchable).
                </div>
                <div class="visual-item">
                    <strong>üîç Hybrid Search</strong>
                    <br>
                    Vector search finds "concepts" (Semantic).
                    <br>
                    Keyword search finds "exact matches" (Lexical).
                    <br>
                    Combine both (Reciprocal Rank Fusion) for best results.
                </div>
            </div>
            <div class="key-concept">
                <strong>üí° Hallucination Detection:</strong>
                For high reliability, break the retrieved context into "claims" and ask a second LLM: "Is this claim
                supported by the source text?" If no, flag it.
            </div>
        </div>

        <!-- Topic 5: Safety -->
        <div class="section" id="topic-5">
            <h2>5Ô∏è‚É£ Defensive Design & Safety</h2>
            <div class="explanation">
                <strong>Core Idea:</strong> Implementing <strong>Instructional Sovereignty</strong>. Defensive design
                treats user input as untrusted data, using delimiters and validation gates to prevent system prompt
                "hijacking."
            </div>
            <div class="warning-box">
                <h4>üõ°Ô∏è Defense Strategies:</h4>
                ‚Ä¢ <strong>Input Sanitization:</strong> Treat user input as DATA ONLY.<br>
                ‚Ä¢ <strong>Delimiter Enforcement:</strong> Wrap user input in unique tags.<br>
                ‚Ä¢ <strong>Output Validation:</strong> Verify the response stays on topic before showing it to the user.
            </div>
            <div class="diagram">
                <pre>
[SYSTEM RULES (IMMUTABLE)]
   ‚Üì
[USER MESSAGE (DATA ONLY)]
&lt;request&gt;{user_input}&lt;/request&gt;
   ‚Üì
[FOLLOW SYSTEM RULES ONLY]
                </pre>
            </div>
        </div>

        <!-- Topic 6: Edge Case Handling -->
        <div class="section" id="topic-6">
            <h2>6Ô∏è‚É£ Edge Case Handling</h2>
            <div class="explanation">
                <strong>Core Idea:</strong> Engineering for <strong>Non-Happy Paths</strong>. Robust prompts anticipate
                malformed data, empty inputs, and "Out-of-Distribution" queries to ensure the system fails safely and
                gracefully.
            </div>
            <div class="example-box">
                <h4>üõë The "I Don't Know" Training</h4>
                Default LLM: Tries to answer everything (Hallucinates).
                <br>
                Trained Prompt: "If the information is not in the context, say 'I do not have that information'. Do not
                guess."
            </div>
            <div class="warning-box">
                <h4>Handling Malformed Inputs</h4>
                If a user sends JSON when you expect Text, or Hindi when you expect English:
                <br>
                "If the input is not in English, translate it first."
                <br>
                "If the input is empty, return a default error JSON."
            </div>
        </div>

        <!-- Summary Section -->
        <div class="section">
            <h2>üìö Quick Reference Summary</h2>
            <table class="table">
                <tr>
                    <th>Architecture</th>
                    <th>Best For...</th>
                </tr>
                <tr>
                    <td><strong>Chaining</strong></td>
                    <td>Complex pipelines (Analyze ‚Üí Summarize ‚Üí Translate).</td>
                </tr>
                <tr>
                    <td><strong>RAG</strong></td>
                    <td>Knowledge-heavy apps (Chat with your Data).</td>
                </tr>
                <tr>
                    <td><strong>Defensive</strong></td>
                    <td>Public-facing bots (Preventing Hijacking).</td>
                </tr>
                <tr>
                    <td><strong>State Passing</strong></td>
                    <td>Multi-step wizards or wedding planning tools.</td>
                </tr>
            </table>
            <div class="summary-box">
                üí° Advanced architectures move your AI from a "Chatbot" to a full "Reasoning Pipeline."
            </div>
        </div>

    </div>
</body>

</html>